<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
<title>Category: Web - BRChen home</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">






<meta name="keywords" content="blog">



    <meta name="keywords" content="blog">
<meta property="og:type" content="website">
<meta property="og:title" content="BRChen home">
<meta property="og:url" content="http://blog.brchen777.com/categories/Web/index.html">
<meta property="og:site_name" content="BRChen home">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="BRChen home">





<link rel="icon" href="/favicon.png">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">

<link rel="stylesheet" href="/css/style.css">

<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
    
    
    
    
    
    
    
    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-150377758-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-150377758-1');
</script>


    


</head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                <img src="/images/logo.png" alt height="28">
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item " href="/">Home</a>
            
            <a class="navbar-item " href="/archives">Archives</a>
            
            <a class="navbar-item " href="/categories">Categories</a>
            
            <a class="navbar-item " href="/tags">Tags</a>
            
            <a class="navbar-item " href="/about">About</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="Search" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            
            <a class="navbar-item" title="GitHub" href="https://github.com/brchen777">
                
                <i class="fab fa-github"></i>
                
            </a>
               
            
        </div>
    </div>
</nav>

    <section class="section section-heading">
    <div class="container">
        <div class="content">
            <h5><i class="far fa-folder"></i>Web</h5>
        </div>
    </div>
</section>
<section class="section">
    <div class="container">
    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2019/遠端控制內網電腦/" itemprop="url">遠端控制內網電腦</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-10-19T05:18:09.000Z" itemprop="datePublished">Oct 19 2019</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/Web/">Web</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            6 minutes read (About 853 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h3 id="緣由"><a href="#緣由" class="headerlink" title="緣由"></a>緣由</h3><p>有時會有學習或工作用的電腦沒有實體 IP (在內網)，但又需要連線到那台電腦<br>這時可以利用 Reverse SSH Tunneling 機制來連線</p>
<h3 id="所需環境與工具"><a href="#所需環境與工具" class="headerlink" title="所需環境與工具"></a>所需環境與工具</h3><ol>
<li>一台有實體 IP 的伺服器<br>如沒有可購買 VPS，如 <a href="https://www.linode.com/" target="_blank" rel="noopener">Linode</a>，最便宜方案一個月 5 美金</li>
<li><a href="https://www.openssh.com/" target="_blank" rel="noopener">OpenSSH</a><br>Linux 有內建<br>Windows 10 可從 <a href="https://jcutrer.com/windows/install-openssh-on-windows10" target="_blank" rel="noopener">設定</a> 來啟用</li>
<li><a href="https://www.harding.motd.ca/autossh/" target="_blank" rel="noopener">autossh</a> (選用)</li>
</ol>
<h3 id="範例環境介紹"><a href="#範例環境介紹" class="headerlink" title="範例環境介紹"></a>範例環境介紹</h3><table>
<thead>
<tr>
<th align="center">Machine</th>
<th align="center">Account</th>
<th align="center">IP</th>
<th align="center">Port</th>
<th align="center">Info</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ServerA</td>
<td align="center">userA</td>
<td align="center">192.168.0.101</td>
<td align="center">22</td>
<td align="center">Private IP (內網；目標電腦)</td>
</tr>
<tr>
<td align="center">ServerB</td>
<td align="center">userB</td>
<td align="center">149.12.34.56</td>
<td align="center">1234</td>
<td align="center">Public IP (外網；中繼電腦)</td>
</tr>
<tr>
<td align="center">Client</td>
<td align="center">user</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">User (你的電腦)</td>
</tr>
</tbody></table>
<p>你想從 Client 這台電腦連到工作用的電腦 ServerA，預期連線流程大概如下:  </p>
<p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Client -----&gt; ServerB --| 防火牆 |--&gt; ServerA</span><br></pre></td></tr></table></figure></p>
<p>又因為 ServerA 沒有實體 IP，ServerB 無法直接連到 ServerA<br>可以利用 Reverse SSH Tunneling 機制<br>ServerA 先連到 ServerB 建立隧道:</p>
<p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ServerB &lt;==| 防火牆 |== ServerA</span><br></pre></td></tr></table></figure></p>
<p>ServerB 再依靠該隧道 port 1234 連到 ServerA:</p>
<p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ServerB ≡≡| 防火牆 |≡≡&gt; ServerA</span><br></pre></td></tr></table></figure></p>
<h3 id="免密碼登入"><a href="#免密碼登入" class="headerlink" title="免密碼登入"></a>免密碼登入</h3><p>連線時會需要帳密<br>如果想免密碼登入可執行此步驟把 public key 傳給對方</p>
<p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[userA@ServerA] $ ssh-keygen <span class="hljs-comment"># 產一對 key</span></span><br><span class="line">[userA@ServerA] $ ssh-copy-id -i ~/.ssh/id_rsa.pub userB@149.12.34.56   <span class="hljs-comment"># 把 public key 送給對方</span></span><br></pre></td></tr></table></figure></p>
<h3 id="目標電腦設定"><a href="#目標電腦設定" class="headerlink" title="目標電腦設定"></a>目標電腦設定</h3><p>Server A 開一個隧道到 ServerB</p>
<p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[userA@ServerA] $ ssh -NfR 1234:localhost:22 userB@149.12.34.56    <span class="hljs-comment"># f 代表背景執行</span></span><br></pre></td></tr></table></figure></p>
<h3 id="連到目標電腦"><a href="#連到目標電腦" class="headerlink" title="連到目標電腦"></a>連到目標電腦</h3><h4 id="方法-1"><a href="#方法-1" class="headerlink" title="方法 1"></a>方法 1</h4><p>Client 先連到 ServerB</p>
<p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[user@Client] $ ssh userB@149.12.34.56</span><br></pre></td></tr></table></figure></p>
<p>因為前面 ServerA 已經開一個隧道過來<br>所以 ServerB 就能連到 ServerA 了</p>
<p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[userB@ServerB] $ ssh userA@localhost -p 1234</span><br></pre></td></tr></table></figure></p>
<h4 id="方法-2"><a href="#方法-2" class="headerlink" title="方法 2"></a>方法 2</h4><p>使用一個指令來達成 “先連到 ServerB 再下指令連到 ServerA”</p>
<p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[user@Client] $ ssh -t userB@149.12.34.56 <span class="hljs-string">"ssh userA@localhost -p 1234"</span></span><br></pre></td></tr></table></figure></p>
<h4 id="方法-3"><a href="#方法-3" class="headerlink" title="方法 3"></a>方法 3</h4><p>直接以 ServerB 當跳板連到 ServerA</p>
<p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[user@Client] $ ssh -o <span class="hljs-string">"ProxyJump userB@149.12.34.56"</span> userA@localhost -p 1234</span><br></pre></td></tr></table></figure></p>
<p>或是</p>
<p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[user@Client] $ ssh -J userB@149.12.34.56 userA@localhost -p 1234</span><br></pre></td></tr></table></figure></p>
<h4 id="方法-4"><a href="#方法-4" class="headerlink" title="方法 4"></a>方法 4</h4><p>原本 ServerB 只能透過 localhost 來連到 ServerA<br>Server A 設定時加上 “-g” 這個 option (允許遠端主機連到本地的轉發 port)<br>讓 Client 透過 ServerB 的 port 直連到 ServerA</p>
<p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[userA@ServerA] $ ssh -gNfR 0.0.0.0:1234:localhost:22 userB@149.12.34.56</span><br></pre></td></tr></table></figure></p>
<p>Client 下指令</p>
<p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[user@Client] $ ssh 149.12.34.56 -p 1234</span><br></pre></td></tr></table></figure></p>
<h3 id="其他相關指令"><a href="#其他相關指令" class="headerlink" title="其他相關指令"></a>其他相關指令</h3><h4 id="查看網路狀態"><a href="#查看網路狀態" class="headerlink" title="查看網路狀態"></a>查看網路狀態</h4><p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -a|less       <span class="hljs-comment"># less 代表翻頁檢視</span></span><br></pre></td></tr></table></figure></p>
<h4 id="登出"><a href="#登出" class="headerlink" title="登出"></a>登出</h4><p>登入後如果想登出可執行以下指令:</p>
<p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="hljs-built_in">exit</span></span><br></pre></td></tr></table></figure></p>
<h4 id="關閉-SSH-Tunnel"><a href="#關閉-SSH-Tunnel" class="headerlink" title="關閉 SSH Tunnel"></a>關閉 SSH Tunnel</h4><p>以下為列出 process 資訊的指令:</p>
<p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ps -ef|grep 1234      <span class="hljs-comment"># 列出使用 1234 port 的 process</span></span><br><span class="line">$ ps aux|less           <span class="hljs-comment"># 列出正在進行的 process</span></span><br><span class="line">$ ps aux|grep ssh       <span class="hljs-comment"># 列出 ssh 相關的 process</span></span><br></pre></td></tr></table></figure></p>
<p>找到 process id 後就能刪除:</p>
<p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="hljs-built_in">kill</span> -9 [process id]  <span class="hljs-comment"># 刪除指定 process id 的 process</span></span><br></pre></td></tr></table></figure></p>
<h3 id="斷線時自動重連"><a href="#斷線時自動重連" class="headerlink" title="斷線時自動重連"></a>斷線時自動重連</h3><p>有連線就有可能斷線<br>這時候 serverA 就可以用 autossh 來建立 Reverse SSH Tunneling:</p>
<p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># -M 後面是監聽用的 port, 不可跟 localhost 前的 port 一樣, 設 0 代表強制關閉</span></span><br><span class="line">[userA@ServerA] $ autossh -M 0 -o ServerAliveInterval=10 -o ExitOnForwardFailure=yes -NfR 1234:localhost:22 userB@149.12.34.56</span><br></pre></td></tr></table></figure></p>
<p>或是可使用 <a href="https://www.npmjs.com/package/cmd-boost" target="_blank" rel="noopener">cmd-boost</a> 這個工具</p>
<p>如果要關閉 autossh:</p>
<p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pkill -3 autossh</span><br></pre></td></tr></table></figure></p>
<h3 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h3><ol>
<li><a href="https://easylife.tw/2043" target="_blank" rel="noopener">Reverse SSH Tunnel實際運用，搭配auotssh永不斷線，putty建立反向tunnel</a></li>
<li><a href="http://blog.codylab.com/cmd-ssh-copy-id/" target="_blank" rel="noopener">實現免密碼 ssh 登入遠端主機</a></li>
<li><a href="https://blog.urfix.com/25-ssh-commands-tricks/" target="_blank" rel="noopener">25 Best SSH Commands / Tricks</a></li>
<li><a href="https://www.xiebruce.top/650.html" target="_blank" rel="noopener">ssh通过代理登录远程主机及穿越跳板机</a></li>
<li><a href="https://www.howtogeek.com/428413/what-is-reverse-ssh-tunneling-and-how-to-use-it/" target="_blank" rel="noopener">What Is Reverse SSH Tunneling? (and How to Use It)</a></li>
<li><a href="https://www.ssh.com/ssh/command/" target="_blank" rel="noopener">SSH COMMAND</a></li>
</ol>

    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2019/建置網站紀錄/" itemprop="url">建置網站紀錄</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-10-08T13:47:00.000Z" itemprop="datePublished">Oct 8 2019</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/Web/">Web</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            7 minutes read (About 1061 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h3 id="緣由"><a href="#緣由" class="headerlink" title="緣由"></a>緣由</h3><p>原本想要一個較個人風的 email<br>參照 <a href="https://free.com.tw/improvmx/" target="_blank" rel="noopener">網路上</a> 得知 Google Domains 不只提供 domain 同時提供指定 email 轉寄的功能<br>就直接照 <a href="https://free.com.tw/google-domains/" target="_blank" rel="noopener">這篇</a> 來購買一個 domain<br>Google 相較其他網域商，雖然價格貴一點點，但每年價格都很一致<br>不像有些強打第一年優惠但第二年以後價格快翻倍跳反而比 Google 的還貴<br>在這邊最便宜的一年 9 USD，商用字詞的約 1X USD 即可入手 (我是買 12 USD 的)</p>
<h3 id="設定-Email-轉寄"><a href="#設定-Email-轉寄" class="headerlink" title="設定 Email 轉寄"></a>設定 Email 轉寄</h3><ol>
<li>購買網域後，進入設定頁 -&gt; 電子郵件</li>
<li>最下方 “電子郵件轉寄” 填入你想要的別名與轉寄的地址，儲存後就會轉寄了<br><img src="/2019/建置網站紀錄/email_forwarding.png" alt></li>
</ol>
<h3 id="利用-Hexo-與-GitHub-Page-建立免費的靜態-Blog"><a href="#利用-Hexo-與-GitHub-Page-建立免費的靜態-Blog" class="headerlink" title="利用 Hexo 與 GitHub Page 建立免費的靜態 Blog"></a>利用 Hexo 與 GitHub Page 建立免費的靜態 Blog</h3><h4 id="所需環境與工具"><a href="#所需環境與工具" class="headerlink" title="所需環境與工具"></a>所需環境與工具</h4><ol>
<li>一個 <a href="https://github.com/" target="_blank" rel="noopener">GitHub</a> 帳號</li>
<li><a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">NodeJS</a></li>
<li><a href="https://git-scm.com/downloads" target="_blank" rel="noopener">Git</a></li>
</ol>
<h4 id="建立一個-Repository"><a href="#建立一個-Repository" class="headerlink" title="建立一個 Repository"></a>建立一個 Repository</h4><ol>
<li>登入 GitHub</li>
<li>建立 Repository</li>
<li>name 填入 <code>yourname.github.io</code> (yourname 請改成你的 GitHub ID)<br>下方的 type 記得請勾選 “public”<br><img src="/2019/建置網站紀錄/create_repository.png" alt></li>
</ol>
<h4 id="安裝-Hexo"><a href="#安裝-Hexo" class="headerlink" title="安裝 Hexo"></a>安裝 Hexo</h4><p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ npm i hexo-cli -g</span><br><span class="line">$ hexo init blog</span><br><span class="line">$ <span class="hljs-built_in">cd</span> blog</span><br><span class="line">$ npm i</span><br></pre></td></tr></table></figure></p>
<h4 id="安裝-Hexo-Git"><a href="#安裝-Hexo-Git" class="headerlink" title="安裝 Hexo Git"></a>安裝 Hexo Git</h4><p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i hexo-deployer-git</span><br></pre></td></tr></table></figure></p>
<h4 id="安裝-Blog-主題"><a href="#安裝-Blog-主題" class="headerlink" title="安裝 Blog 主題"></a>安裝 Blog 主題</h4><p>這邊我們以安裝 <a href="https://github.com/ppoffice/hexo-theme-minos" target="_blank" rel="noopener">minos</a> 為例子<br>其中 minos 需要 <a href="https://www.npmjs.com/package/hexo-renderer-sass" target="_blank" rel="noopener">hexo-renderer-sass</a> 這個套件</p>
<p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="hljs-built_in">clone</span> https://github.com/ppoffice/hexo-theme-minos.git themes/minos</span><br><span class="line">$ npm i hexo-renderer-sass</span><br></pre></td></tr></table></figure></p>
<h4 id="調整設定"><a href="#調整設定" class="headerlink" title="調整設定"></a>調整設定</h4><p>在 blog 資料夾內可以看到 “_config.yml” 這個設定檔案<br>打開後在中下方有個 theme 的部分改成:</p>
<p><figure class="highlight yml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">theme:</span> <span class="hljs-string">minos</span></span><br></pre></td></tr></table></figure></p>
<p>最下方 deploy 的部分則改成:</p>
<p><figure class="highlight yml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">deploy:</span></span><br><span class="line"><span class="hljs-attr">    type:</span> <span class="hljs-string">git</span></span><br><span class="line"><span class="hljs-attr">    repository:</span> <span class="hljs-attr">http://github.com/yourname/yourname.github.io.git</span></span><br><span class="line"><span class="hljs-attr">    branch:</span> <span class="hljs-string">master</span></span><br></pre></td></tr></table></figure></p>
<p>這裡的 “yourname” 改成你的 github 帳號<br>其他更詳細的設定可參考 <a href="https://hexo.io/docs/configuration" target="_blank" rel="noopener">這裡</a></p>
<h4 id="開啟-Server"><a href="#開啟-Server" class="headerlink" title="開啟 Server"></a>開啟 Server</h4><p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo s -p [port]</span><br></pre></td></tr></table></figure></p>
<p>預設在 <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a> 看 Local Page (裡面會有一篇 Hello World)<br><img src="/2019/建置網站紀錄/blog_home.png" alt></p>
<h4 id="建置靜態網頁"><a href="#建置靜態網頁" class="headerlink" title="建置靜態網頁"></a>建置靜態網頁</h4><p>把 Markdown File 轉成網頁</p>
<p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g</span><br></pre></td></tr></table></figure></p>
<h4 id="發佈到-GitHub-Page-上"><a href="#發佈到-GitHub-Page-上" class="headerlink" title="發佈到 GitHub Page 上"></a>發佈到 GitHub Page 上</h4><p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo d</span><br></pre></td></tr></table></figure></p>
<p>或是你也可以建置、發佈一起做</p>
<p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo d -g</span><br></pre></td></tr></table></figure></p>
<h3 id="網站轉址"><a href="#網站轉址" class="headerlink" title="網站轉址"></a>網站轉址</h3><p>既然我們已經有 Google Domain 跟 Hexo + GitHub Page 產的 Blog，該是串起來的時候了</p>
<h4 id="設定-DNS"><a href="#設定-DNS" class="headerlink" title="設定 DNS"></a>設定 DNS</h4><p>到 Google Domains 設定頁 -&gt; DNS -&gt; 自訂資源紀錄<br>添加一筆 Type A，IP 如下:</p>
<ul>
<li>185.199.108.153</li>
<li>185.199.109.153</li>
<li>185.199.110.153</li>
<li>185.199.111.153</li>
</ul>
<p>再添加一筆 CNAME:<br>name 填 subdomain (例如 “blog”)<br>data 填 <code>yourname.github.io</code> (yourname 請改成你的 github ID)</p>
<p>填完顯示如下:<br><img src="/2019/建置網站紀錄/custom_resource_records.png" alt></p>
<h4 id="設定-GitHub-Page-的-Domain"><a href="#設定-GitHub-Page-的-Domain" class="headerlink" title="設定 GitHub Page 的 Domain"></a>設定 GitHub Page 的 Domain</h4><ol>
<li><p>在 /blog/source 資料夾建立 CNAME 檔案</p>
<p> <figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="hljs-built_in">cd</span> /blog/<span class="hljs-built_in">source</span></span><br><span class="line">$ touch CNAME</span><br></pre></td></tr></table></figure></p>
</li>
<li><p>檔案內填寫入</p>
<p> <figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">subdomain.domain.com</span><br></pre></td></tr></table></figure></p>
<p> 假設我的 subdomain 是 “blog”<br> 我買的 domain 是 <code>brchen777.com</code><br> 那在這邊要填入的會是 <code>blog.brchen777.com</code></p>
</li>
<li><p>假設有填好，進入 GitHub Repository -&gt; Settings -&gt; GitHub Pages 區塊，會有 “Your site is published at XXX” 的訊息，其中 XXX 就是 blog 的網址，顯示如下:<br><img src="/2019/建置網站紀錄/github_pages.png" alt></p>
</li>
<li><p>GitHub Page 有內建 HTTPS，網站設定好一段時間之後就有 “Enforce HTTPS” 可選<br>(如上圖的下方)</p>
</li>
</ol>
<h4 id="設定多個-Subdomain-指向同一個-GitHub-Page"><a href="#設定多個-Subdomain-指向同一個-GitHub-Page" class="headerlink" title="設定多個 Subdomain 指向同一個 GitHub Page"></a>設定多個 Subdomain 指向同一個 GitHub Page</h4><p>因為 GitHub Page 不支援多個 CNAME 設定，所以其他的 subdomain 要自行設定轉址<br>到 Google Domains 設定頁 -&gt; DNS -&gt; 綜合記錄<br>假設要把 “www” 這個 subdomain 轉址，新增一筆子網域轉址如下:<br><img src="/2019/建置網站紀錄/synthetic_records.png" alt><br>以這篇案例來說，<code>www.brchen777.com</code> 與 <code>brchen777.github.io</code> 都會指到 <code>blog.brchen777.com</code></p>
<h3 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h3><ol>
<li><a href="https://free.com.tw/google-domains/" target="_blank" rel="noopener">在 Google Domains 註冊購買網域名稱教學</a></li>
<li><a href="https://yaoandy107.github.io/hexo-tutorial/" target="_blank" rel="noopener">Hexo+GitHub，新手也可以快速建立部落格</a></li>
<li><a href="https://medium.com/@bebebobohaha/%E4%BD%BF%E7%94%A8-hexo-gitpage-%E6%90%AD%E5%BB%BA%E5%80%8B%E4%BA%BA-blog-5c6ed52f23db" target="_blank" rel="noopener">如何搭建個人 Blog 使用 Hexo + Gitpage</a></li>
<li><a href="https://ithelp.ithome.com.tw/articles/10207997" target="_blank" rel="noopener">Hexo - 前端也能建置部落格！更換主題與發表文章篇</a></li>
<li><a href="https://help.github.com/en/articles/configuring-a-custom-domain-for-your-github-pages-site" target="_blank" rel="noopener">Configuring a custom domain for your GitHub Pages site</a></li>
<li><a href="https://blog.haterain.app/custom-domain-by-google-domain/" target="_blank" rel="noopener">自訂網域名稱：Google Domain</a></li>
<li><a href="https://help.github.com/en/articles/troubleshooting-custom-domains-and-github-pages" target="_blank" rel="noopener">Troubleshooting custom domains and GitHub Pages</a></li>
</ol>

    
    </div>
    
    
</article>




    
    
    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2019 brchen777&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("en-AU");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
</script>

    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
            cursor: pointer;
        }

        .hljs .clipboard-btn:hover {
          color: #8a8a8a;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    


<script src="/js/script.js"></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js"></script>
    
</body>
</html>