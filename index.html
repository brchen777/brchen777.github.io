<!DOCTYPE html><html class="has-navbar-fixed-top"><head><meta charset="utf-8"><title>BRChen home</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css"><meta name="keywords" content="blog"><meta name="keywords" content="blog"><meta property="og:type" content="website"><meta property="og:title" content="BRChen home"><meta property="og:url" content="http:&#x2F;&#x2F;blog.brchen777.com&#x2F;index.html"><meta property="og:site_name" content="BRChen home"><meta property="og:locale" content="en"><meta name="twitter:card" content="summary"><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs2015.min.css"><link rel="stylesheet" href="/css/style.css"><script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-150377758-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-150377758-1")</script></head><body><nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation"><div class="container"><div class="navbar-brand"><a class="navbar-item navbar-logo" href="/"><img src="/images/logo.png" alt="" height="28"></a><div class="navbar-burger"><span></span> <span></span> <span></span></div></div><div class="navbar-menu navbar-start"><a class="navbar-item" href="/">Home</a> <a class="navbar-item" href="/archives">Archives</a> <a class="navbar-item" href="/categories">Categories</a> <a class="navbar-item" href="/tags">Tags</a></div><div class="navbar-menu navbar-end"><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i> </a><a class="navbar-item" title="GitHub" href="https://github.com/brchen777" target="_blank" rel="noopener"><i class="fab fa-github"></i></a></div></div></nav><section class="section"><div class="container"><article class="article content gallery" itemscope itemprop="blogPost"><h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name"><a href="/2019/12/%E7%94%A8-Flutter-%E5%AF%AB-Android-APP/" itemprop="url">用 Flutter 寫 Android APP</a></h1><div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile"><span class="column is-narrow"><time datetime="2019-12-29T10:00:53.000Z" itemprop="datePublished">Dec 29 2019</time> </span><span class="column is-narrow">3 minutes read (About 452 words)</span></div><div class="article-entry is-size-6-mobile" itemprop="articleBody"><h2 id="所需環境與工具"><a href="#所需環境與工具" class="headerlink" title="所需環境與工具"></a>所需環境與工具</h2><p>以下以 Windows 10 + VSCode 為例：</p><h3 id="安裝-Flutter-SDK"><a href="#安裝-Flutter-SDK" class="headerlink" title="安裝 Flutter SDK"></a>安裝 Flutter SDK</h3><ol><li>到 <a href="https://flutter.dev/docs/get-started/install/windows" target="_blank" rel="noopener">這裡</a> 有安裝說明</li><li><a href="https://storage.googleapis.com/flutter_infra/releases/stable/windows/flutter_windows_v1.12.13+hotfix.5-stable.zip" target="_blank" rel="noopener">這裡</a> 可下載最新版 (v1.12.13 + hotfix5 版本)</li><li>安裝後壓縮檔解壓縮並把 <strong>flutter</strong> 資料夾放到想要的位置<br>(官方建議<strong>不要</strong>把 <strong>flutter</strong> 資料夾放到 <code>C:\Program Files\</code> 內)</li><li>設定環境變數<br>假如資料夾路徑為 <code>C:\src\flutter</code><br>本機 -&gt; 右鍵 -&gt; 內容 -&gt; 進階系統設定 -&gt; 進階 -&gt; 環境變數 -&gt; 系統變數 -&gt; 編輯 -&gt; 把 <code>C:\src\flutter\bin</code> 加上去<br><img src="/2019/12/%E7%94%A8-Flutter-%E5%AF%AB-Android-APP/env_variable1.png" alt></li></ol><h3 id="安裝-Java-SDK"><a href="#安裝-Java-SDK" class="headerlink" title="安裝 Java SDK"></a>安裝 Java SDK</h3><ol><li>到 <a href="https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">這裡</a> 可下載 JAVA 8<br>備註：請不要裝更新的版本，不然 Android SDK 會不支援</li></ol><h3 id="安裝-Android-SDK-Manager"><a href="#安裝-Android-SDK-Manager" class="headerlink" title="安裝 Android SDK Manager"></a>安裝 Android SDK Manager</h3><ol><li>到 <a href="https://developer.android.com/studio/#command-tools" target="_blank" rel="noopener">這裡</a> 下載 Command Command line tools</li><li>解壓縮資料夾並把 <strong>tools</strong> 資料夾放到想要的位置<br>(在這裡以放到 <code>C:\src\androidSDK</code> 內為範例)</li></ol><h3 id="安裝-Android-SDK"><a href="#安裝-Android-SDK" class="headerlink" title="安裝 Android SDK"></a>安裝 Android SDK</h3><ol><li>進到 <strong>tools\bin</strong> 內開啟 cmd</li><li>列表出可安裝清單<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sdkmanager --list</span><br></pre></td></tr></table></figure></li><li>安裝 <strong>platform-tools</strong>、<strong>platforms</strong>、<strong>build-tools</strong><br>以下以 29 版當例子：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sdkmanager &quot;platform-tools&quot; &quot;platforms;android-29&quot; &quot;build-tools;29.0.2&quot;</span><br></pre></td></tr></table></figure></li><li>加上環境變數 ANDROID_HOME<br>假如資料夾路徑為 <code>C:\src\androidSDK</code><br>本機 -&gt; 右鍵 -&gt; 內容 -&gt; 進階系統設定 -&gt; 進階 -&gt; 環境變數 -&gt; 系統變數 -&gt; 新增 -&gt; 把 <code>C:\src\androidSDK</code> 加上去<br><img src="/2019/12/%E7%94%A8-Flutter-%E5%AF%AB-Android-APP/env_variable2.png" alt></li></ol><h3 id="安裝-Flutter-套件"><a href="#安裝-Flutter-套件" class="headerlink" title="安裝 Flutter 套件"></a>安裝 Flutter 套件</h3><ol><li>開啟 VSCode</li><li>安裝 Flutter Plugin<br><img src="/2019/12/%E7%94%A8-Flutter-%E5%AF%AB-Android-APP/flutter_plugin.png" alt></li></ol><h3 id="檢測環境"><a href="#檢測環境" class="headerlink" title="檢測環境"></a>檢測環境</h3><ol><li>cmd 下指令接受 license<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ flutter doctor --android-licenses</span><br></pre></td></tr></table></figure></li><li>把 Android 手機接上電腦</li><li>檢測環境<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ flutter doctor</span><br></pre></td></tr></table></figure><br>出現以下畫面就算成功：<br><img src="/2019/12/%E7%94%A8-Flutter-%E5%AF%AB-Android-APP/flutter_doctor.png" alt></li></ol><h2 id="資料來源"><a href="#資料來源" class="headerlink" title="資料來源"></a>資料來源</h2><ol><li><a href="https://github.com/flutter/flutter/issues/25397#issuecomment-483945640" target="_blank" rel="noopener">No valid Android SDK platforms found in C:\Android\android-sdk\platforms. Directory was empty.</a></li></ol></div></article><article class="article content gallery" itemscope itemprop="blogPost"><h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name"><a href="/2019/11/reCaptcha-%E7%B7%B4%E7%BF%92/" itemprop="url">reCaptcha 練習</a></h1><div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile"><span class="column is-narrow"><time datetime="2019-11-02T06:46:51.000Z" itemprop="datePublished">Nov 2 2019</time> </span><span class="column is-narrow article-category"><i class="far fa-folder"></i> <a class="article-category-link" href="/categories/Web/">Web</a> </span><span class="column is-narrow">6 minutes read (About 962 words)</span></div><div class="article-entry is-size-6-mobile" itemprop="articleBody"><h2 id="緣由"><a href="#緣由" class="headerlink" title="緣由"></a>緣由</h2><p>發文或登入時阻擋機器人 (bot)</p><h2 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h2><ol><li><p>v3：分數驗證 (Google 會回覆 0~1 之間的分數)</p></li><li><p>v2：問題驗證 (要回答 Google 問的圖形之類的問題)<br>(1) checkbox：勾選 “我不是機器人” 來驗證要求<br>(2) invisible：藏在背景，有疑慮才需驗證</p></li></ol><p>備註：<a href="https://github.com/fjcaetano/ReCaptcha#warning-%EF%B8%8F" target="_blank" rel="noopener">目前 ios 只支援 v2 invisible</a></p><h2 id="步驟"><a href="#步驟" class="headerlink" title="步驟"></a>步驟</h2><h3 id="申請-reCaptcha-key"><a href="#申請-reCaptcha-key" class="headerlink" title="申請 reCaptcha key"></a>申請 reCaptcha key</h3><p>這裡以 v2 checkbox 為例<br>先到 <a href="https://www.google.com/recaptcha/admin/create" target="_blank" rel="noopener">這裏</a> 申請<br>介面如下：<br><img src="/2019/11/reCaptcha-%E7%B7%B4%E7%BF%92/register1.png" alt></p><p>標籤填名稱<br>類型勾選 “v2” -&gt; “我不是機器人核取方塊”<br>網域填寫網址或是 app 的 package name，如果是本地端測試也要填個 <code>localhost</code> 與 <code>127.0.0.1</code></p><h3 id="複製-key"><a href="#複製-key" class="headerlink" title="複製 key"></a>複製 key</h3><p>網站金鑰 (site key) 是前端用<br>密鑰 (secret) 則是後端用 (請保存好，小心外洩)<br><img src="/2019/11/reCaptcha-%E7%B7%B4%E7%BF%92/register2.png" alt></p><h3 id="前端範例"><a href="#前端範例" class="headerlink" title="前端範例"></a>前端範例</h3><p>以金鑰 = <code>6Lc3scAUAAAAAKtFexJH_-IBcgXj94IEyEORgLnm</code> 為例</p><h4 id="client-html-範例"><a href="#client-html-範例" class="headerlink" title="client.html 範例"></a>client.html 範例</h4><p>在這邊模擬一個登入畫面</p><ol><li><p>第 14 行；html 內放一個 hidden tag <code>recaptcha-token</code> 來存 token</p></li><li><p>第 17 行；html 內放一個 div tag <code>recaptcha</code> 來放 checkbox</p></li><li><p>第 19 ~ 20 行；底下再 load <code>https://www.google.com/recaptcha/api.js</code> 與 <code>./recaptcha.js</code></p></li></ol><p></p><figure class="highlight html hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>reCAPTCHA V2 checkbox Test<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myForm"</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"http://localhost:7777/login"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span></span><br><span class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"account"</span>&gt;</span>Account:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"account"</span> <span class="hljs-attr">required</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span></span><br><span class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"password"</span>&gt;</span>Password:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">required</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span></span><br><span class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"recaptcha-token"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"token"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"hidden"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">""</span>&gt;</span></span><br><span class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>登入<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"recaptcha"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line">    <span class="hljs-comment">&lt;!--js--&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://www.google.com/recaptcha/api.js?onload=onloadCallback&amp;render=explicit"</span> <span class="hljs-attr">async</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./recaptcha.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><h4 id="recaptcha-js-範例"><a href="#recaptcha-js-範例" class="headerlink" title="recaptcha.js 範例"></a>recaptcha.js 範例</h4><ol><li><p>第 9 ~ 13 行；recaptcha 功能綁定到 <code>recaptcha</code> div 上</p></li><li><p>第 16 ~ 18 行；render 的 callback 把拿到的 token 存回 <code>recaptcha-token</code> 內</p></li><li><p>之後就能利用 form post 把 account、password、token 一起傳給後端</p></li></ol><p></p><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> myForm = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"myForm"</span>);</span><br><span class="line"><span class="hljs-keyword">const</span> recaptcha = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">"#recaptcha"</span>);</span><br><span class="line"><span class="hljs-keyword">const</span> recaptchaToken = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">"#recaptcha-token"</span>);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// v2 checkbox key</span></span><br><span class="line"><span class="hljs-keyword">const</span> siteKey = <span class="hljs-string">"6Lc3scAUAAAAAKtFexJH_-IBcgXj94IEyEORgLnm"</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onloadCallback</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    <span class="hljs-built_in">window</span>.grecaptcha.render(recaptcha, &#123;</span><br><span class="line">        sitekey: siteKey,</span><br><span class="line">        size: <span class="hljs-string">"checkbox"</span>,</span><br><span class="line">        callback: updateToken</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateToken</span>(<span class="hljs-params">token</span>) </span>&#123;</span><br><span class="line">    recaptchaToken.value = token;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h3 id="Android-範例"><a href="#Android-範例" class="headerlink" title="Android 範例"></a>Android 範例</h3><p>請參考 <a href="https://developer.android.com/training/safetynet/recaptcha.html" target="_blank" rel="noopener">這裏</a></p><h3 id="iOS-範例"><a href="#iOS-範例" class="headerlink" title="iOS 範例"></a>iOS 範例</h3><p>請參考 <a href="https://github.com/fjcaetano/ReCaptcha" target="_blank" rel="noopener">這裏</a></p><h3 id="後端範例"><a href="#後端範例" class="headerlink" title="後端範例"></a>後端範例</h3><p>這邊使用 <a href="https://expressjs.com/" target="_blank" rel="noopener">express</a> 來開一個後端 Server，<a href="https://github.com/axios/axios" target="_blank" rel="noopener">axios</a> 來發 request<br>要特別注意的是 <a href="https://developers.google.com/recaptcha/docs/verify#api_request" target="_blank" rel="noopener">siteverify API</a> 雖然 method 是 POST<br>但只能用 <a href="https://nodejs.org/api/querystring.html" target="_blank" rel="noopener">querystring</a> 來傳遞額外參數</p><ol><li><p>第 12 行；接收 token 等參數</p></li><li><p>第 18 行；把 <code>__your_secret__</code> 替換成申請的密鑰</p></li><li><p>第 15 ~ 21 行；把 secret、token 當參數 request siteverify API</p></li><li><p>第 22 ~ 31 行；收到 siteverify API 的 Response，如果 success 是 true，代表驗證成功，第 24 行以後可作後續的 login 行為</p></li></ol><p></p><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> axios = <span class="hljs-built_in">require</span>(<span class="hljs-string">"axios"</span>);</span><br><span class="line"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">"express"</span>);</span><br><span class="line"><span class="hljs-keyword">const</span> bodyParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">"body-parser"</span>);</span><br><span class="line"><span class="hljs-keyword">const</span> querystring = <span class="hljs-built_in">require</span>(<span class="hljs-string">"querystring"</span>);</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="hljs-attr">extended</span>: <span class="hljs-literal">false</span> &#125;));</span><br><span class="line">app.use(bodyParser.json());</span><br><span class="line"></span><br><span class="line">app.post(<span class="hljs-string">"/login"</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; &#123;</span><br><span class="line">    <span class="hljs-keyword">const</span> &#123; account, password, token &#125; = req.body;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">const</span> &#123; status, result &#125; = <span class="hljs-keyword">await</span> axios</span><br><span class="line">        .post(</span><br><span class="line">            <span class="hljs-string">"https://www.google.com/recaptcha/api/siteverify"</span>,</span><br><span class="line">            querystring.stringify(&#123;</span><br><span class="line">                secret: <span class="hljs-string">"__your_secret__"</span>,</span><br><span class="line">                response: token</span><br><span class="line">            &#125;)</span><br><span class="line">        )</span><br><span class="line">        .then(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="hljs-keyword">const</span> &#123; success, <span class="hljs-string">"error-codes"</span>: errorCode &#125; = result.data;</span><br><span class="line">            <span class="hljs-keyword">if</span> (success === <span class="hljs-literal">true</span>) &#123;</span><br><span class="line">                <span class="hljs-comment">// login code...</span></span><br><span class="line">                <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">status</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">result</span>: &#123; <span class="hljs-attr">msg</span>: <span class="hljs-string">"Success"</span> &#125; &#125;;</span><br><span class="line">            &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">                <span class="hljs-comment">// verify error case</span></span><br><span class="line">                <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">status</span>: <span class="hljs-number">404</span>, <span class="hljs-attr">result</span>: &#123; errorCode &#125; &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    res.status(status).json(result);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(<span class="hljs-number">7777</span>);</span><br></pre></td></tr></table></figure><p></p><h3 id="成品畫面"><a href="#成品畫面" class="headerlink" title="成品畫面"></a>成品畫面</h3><p>如有設定成功的話會如以下畫面：<br><img src="/2019/11/reCaptcha-%E7%B7%B4%E7%BF%92/result.png" alt><br>備註：如果 “我不是機器人” 區塊沒出來的話可去 <a href="https://www.google.com/recaptcha/admin/site" target="_blank" rel="noopener">控制台</a> 確認有沒有把網域加進去</p><h3 id="Error-Code"><a href="#Error-Code" class="headerlink" title="Error Code"></a>Error Code</h3><p>如果 response 內的 success === false 時<br><code>error-codes</code> 會有錯誤訊息的 code<br>詳細可參考 <a href="https://developers.google.com/recaptcha/docs/verify#error_code_reference" target="_blank" rel="noopener">這裡</a></p><h2 id="資料來源"><a href="#資料來源" class="headerlink" title="資料來源"></a>資料來源</h2><ol><li><a href="https://developers.google.com/recaptcha/intro" target="_blank" rel="noopener">Developer’s Guide</a></li><li><a href="https://medium.com/@z3388638/recaptcha-v2-invisible-%E4%B8%8D%E7%94%A8%E5%86%8D%E6%8A%8A-%E6%88%91%E4%B8%8D%E6%98%AF%E6%A9%9F%E5%99%A8%E4%BA%BA-%E5%88%97%E5%85%A5%E9%A0%81%E9%9D%A2%E8%A8%AD%E8%A8%88%E8%80%83%E9%87%8F-2b83dbce03cb" target="_blank" rel="noopener">reCAPTCHA v2 Invisible，不用再把「我不是機器人」列入頁面設計考量</a></li><li><a href="https://medium.com/aws-factory/recaptcha-form-with-an-amazon-aws-serverless-backend-environment-809cdb788424" target="_blank" rel="noopener">reCaptcha Form with an Amazon AWS™ serverless backend environment</a></li><li><a href="https://www.storyblok.com/tp/serverless-contact-form-setup" target="_blank" rel="noopener">How to Setup a Serverless Contact Form with AWS Lambda, reCAPTCHA and Storyblok</a></li><li><a href="https://easonwang01.gitbooks.io/web_advance/google_speech_api/google-recaptcha.html" target="_blank" rel="noopener">簡介:給人類方便給bot困難</a></li><li><a href="https://webdesign.tutsplus.com/zh-hant/tutorials/how-to-integrate-no-captcha-recaptcha-in-your-website--cms-23024" target="_blank" rel="noopener">如何整合“No CAPTCHA reCAPTCHA”（驗證碼）到你的網站裡</a></li></ol></div></article><article class="article content gallery" itemscope itemprop="blogPost"><h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name"><a href="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/" itemprop="url">建置網站記錄2-各種設定</a></h1><div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile"><span class="column is-narrow"><time datetime="2019-10-27T07:31:10.000Z" itemprop="datePublished">Oct 27 2019</time> </span><span class="column is-narrow article-category"><i class="far fa-folder"></i> <a class="article-category-link" href="/categories/Web/">Web</a> </span><span class="column is-narrow">7 minutes read (About 994 words)</span></div><div class="article-entry is-size-6-mobile" itemprop="articleBody"><h2 id="緣由"><a href="#緣由" class="headerlink" title="緣由"></a>緣由</h2><p><a href="/2019/10/建置網站紀錄">上一篇</a> 網誌建完之後只有基本的樣式<br>可能有額外需求要設定，固寫在此篇</p><h2 id="備份"><a href="#備份" class="headerlink" title="備份"></a>備份</h2><p>hexo-cli 只上傳轉換後的 html 檔<br>如需要備份 markdown 原始檔與專案設定檔可安裝 <a href="https://github.com/coneycode/hexo-git-backup" target="_blank" rel="noopener">hexo-git-backup</a></p><ol><li><p>安裝</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i hexo-git-backup</span><br></pre></td></tr></table></figure><p></p></li><li><p>_config.yml 增加設定：</p><p></p><figure class="highlight yml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">backup:</span></span><br><span class="line">    <span class="hljs-attr">type:</span> <span class="hljs-string">git</span></span><br><span class="line">    <span class="hljs-attr">repository:</span></span><br><span class="line">        <span class="hljs-attr">github:</span> <span class="hljs-string">http://github.com/yourname/yourname.github.io.git,branchname</span></span><br></pre></td></tr></table></figure><p></p><p>這裡的 “yourname” 改成你的 github 帳號<br>“branchname” 改成備份的 branch name</p></li><li><p>設定完就能下指令備份：</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo b</span><br></pre></td></tr></table></figure><p></p></li></ol><h2 id="壓縮靜態網頁"><a href="#壓縮靜態網頁" class="headerlink" title="壓縮靜態網頁"></a>壓縮靜態網頁</h2><p>這邊是用 <a href="https://github.com/curbengh/hexo-yam" target="_blank" rel="noopener">hexo-yam</a><br>直接下指令安裝：</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-yam</span><br></pre></td></tr></table></figure><p></p><p>安裝完預設就會會啟動了，無須另外設定<br>如需特調細項可再去 _config.yml 做額外設定</p><h2 id="分享功能"><a href="#分享功能" class="headerlink" title="分享功能"></a>分享功能</h2><p>進入文章後預設底下會有 error 區塊<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/default_config_error.png" alt></p><p>我們可以參考專案的 /themes/minos/_config.yml 檔案<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/minos_config.png" alt></p><p>minos 的分享預設是用 <a href="https://sharethis.com/" target="_blank" rel="noopener">sharethis</a></p><ol><li><p>註冊一個帳號</p></li><li><p>以 Domain 新增一筆 Property<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/sharethis1.png" alt></p></li><li><p>選擇一個想使用的樣式，裡面可再做細項設定<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/sharethis2.png" alt></p></li><li><p>設定好樣式後點選 “Get the Code”<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/sharethis3.png" alt></p></li><li><p>複製 js code 的 “src” 的部分 (只要網址就好，不用整個 code)<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/sharethis4.png" alt></p></li><li><p>網址複製到 /themes/minos/_config.yml 的 “share” 的 “install_url”<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/sharethis5.png" alt></p></li><li><p>專案 deploy 後點選 “Verify Manually”<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/sharethis6.png" alt></p></li><li><p>把線上站隨便一篇的網址複製過來進行檢測，檢測成功的話紅色區快會消失<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/sharethis7.png" alt></p></li><li><p>設置成功的話網誌倒數第二塊會出現分享功能<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/sharethis8.png" alt></p></li></ol><h2 id="留言功能"><a href="#留言功能" class="headerlink" title="留言功能"></a>留言功能</h2><p>minos 的分享預設是用 <a href="https://disqus.com/" target="_blank" rel="noopener">disqus</a></p><ol><li><p>註冊一個帳號</p></li><li><p>新增一個 Site<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/disqus1.png" alt></p></li><li><p>新增完後點選 “general” 並複製 “Shortname” 欄位<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/disqus2.png" alt></p></li><li><p>short name 貼到 /themes/minos/_config.yml 的 “comment” 的 “install_url”<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/disqus3.png" alt></p></li><li><p>設置成功的話網誌最下方會出現留言功能<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/disqus4.png" alt></p></li></ol><h2 id="追蹤"><a href="#追蹤" class="headerlink" title="追蹤"></a>追蹤</h2><p>這邊是用 <a href="https://analytics.google.com/analytics/web/" target="_blank" rel="noopener">Google Analytics</a></p><ol><li><p>Google 帳號登入</p></li><li><p>新增網站</p></li><li><p>追蹤碼貼到 /themes/minos/_config.yml 的 “Other plugins and their settings.” 的 “google-analytics” 的 “tracking_id”<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/google_analytics.png" alt></p></li></ol><h2 id="調整網站-Menu"><a href="#調整網站-Menu" class="headerlink" title="調整網站 Menu"></a>調整網站 Menu</h2><p>Menu 是這個：<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/menu1.png" alt></p><p>可到 /themes/minos/_config.yml 來做調整：<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/menu2.png" alt></p><h2 id="更換-DNS-Server"><a href="#更換-DNS-Server" class="headerlink" title="更換 DNS Server"></a>更換 DNS Server</h2><p>Google Domains 的功能滿陽春的<br>因此換到 <a href="https://www.cloudflare.com/" target="_blank" rel="noopener">CloudFlare</a> 多了一些分析功能 (有些要付費)</p><ol><li><p>註冊帳號</p></li><li><p>點選 “Add a Site”<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/dns1.png" alt></p></li><li><p>填入 Blog 網址後點選 “Add site”<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/dns2.png" alt></p></li><li><p>等待 CloudFlare 掃描<br>基本上 “電子郵件轉寄” 與大部分 “自訂資源記錄” 的設定都會完整複製過去<br>有缺少再補即可 (如 VPS 設定沒有複製過去)</p></li><li><p>複製 CloudFlare 提供的 DNS Server</p></li><li><p>回到 Google Domains -&gt; DNS -&gt; 名稱伺服器<br>選擇 “使用自訂名稱伺服器” 並填入剛複製的 DNS Server 網址<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/dns3.png" alt></p></li></ol><h2 id="更新-Blog-後刪除-Cache"><a href="#更新-Blog-後刪除-Cache" class="headerlink" title="更新 Blog 後刪除 Cache"></a>更新 Blog 後刪除 Cache</h2><p>使用 CloudFlare 後，網站就會有了 Cache 功能<br>如果你更新網站想馬上看線上站的結果<br>可到 Caching -&gt; Purge everything，點選 “purge everything”<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/cloudflare_caching1.png" alt></p><p><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E8%A8%98%E9%8C%842-%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A/cloudflare_caching2.png" alt></p></div></article><article class="article content gallery" itemscope itemprop="blogPost"><h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name"><a href="/2019/10/%E9%81%A0%E7%AB%AF%E6%8E%A7%E5%88%B6%E5%85%A7%E7%B6%B2%E9%9B%BB%E8%85%A6/" itemprop="url">遠端控制內網電腦</a></h1><div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile"><span class="column is-narrow"><time datetime="2019-10-19T05:18:09.000Z" itemprop="datePublished">Oct 19 2019</time> </span><span class="column is-narrow article-category"><i class="far fa-folder"></i> <a class="article-category-link" href="/categories/Web/">Web</a> </span><span class="column is-narrow">7 minutes read (About 999 words)</span></div><div class="article-entry is-size-6-mobile" itemprop="articleBody"><h2 id="緣由"><a href="#緣由" class="headerlink" title="緣由"></a>緣由</h2><p>有時會有學習或工作用的電腦沒有實體 IP (在內網)，但又需要連線到那台電腦<br>這時可以利用 Reverse SSH Tunneling 機制來連線</p><h2 id="所需環境與工具"><a href="#所需環境與工具" class="headerlink" title="所需環境與工具"></a>所需環境與工具</h2><ol><li><p>一台有實體 IP 的伺服器<br>如沒有可購買 VPS，如 <a href="https://www.linode.com/" target="_blank" rel="noopener">Linode</a>，最便宜方案一個月 5 美金</p></li><li><p><a href="https://www.openssh.com/" target="_blank" rel="noopener">OpenSSH</a><br>Linux 有內建<br>Windows 10 可從 <a href="https://jcutrer.com/windows/install-openssh-on-windows10" target="_blank" rel="noopener">設定</a> 來啟用</p></li><li><p><a href="https://www.harding.motd.ca/autossh/" target="_blank" rel="noopener">autossh</a> (選用)</p></li></ol><h2 id="範例環境介紹"><a href="#範例環境介紹" class="headerlink" title="範例環境介紹"></a>範例環境介紹</h2><table><thead><tr><th align="center">Machine</th><th align="center">Account</th><th align="center">IP</th><th align="center">Port</th><th align="center">Info</th></tr></thead><tbody><tr><td align="center">ServerA</td><td align="center">userA</td><td align="center">192.168.0.101</td><td align="center">22</td><td align="center">Private IP (內網；目標電腦)</td></tr><tr><td align="center">ServerB</td><td align="center">userB</td><td align="center">149.12.34.56</td><td align="center">1234</td><td align="center">Public IP (外網；中繼電腦)</td></tr><tr><td align="center">Client</td><td align="center">user</td><td align="center"></td><td align="center"></td><td align="center">User (你的電腦)</td></tr></tbody></table><p>你想從 Client 這台電腦連到工作用的電腦 ServerA，預期連線流程大概如下:</p><p></p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Client -----&gt; ServerB --| 防火牆 |--&gt; ServerA</span><br></pre></td></tr></table></figure><p></p><p>又因為 ServerA 沒有實體 IP，ServerB 無法直接連到 ServerA<br>可以利用 Reverse SSH Tunneling 機制<br>ServerA 先連到 ServerB 建立隧道:</p><p></p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ServerB &lt;==| 防火牆 |== ServerA</span><br></pre></td></tr></table></figure><p></p><p>ServerB 再依靠該隧道 port 1234 連到 ServerA:</p><p></p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ServerB ≡≡| 防火牆 |≡≡&gt; ServerA</span><br></pre></td></tr></table></figure><p></p><h2 id="免密碼登入"><a href="#免密碼登入" class="headerlink" title="免密碼登入"></a>免密碼登入</h2><p>連線時會需要帳密<br>如果想免密碼登入可執行此步驟把 public key 傳給對方</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[userA@ServerA] $ ssh-keygen <span class="hljs-comment"># 產一對 key</span></span><br><span class="line">[userA@ServerA] $ ssh-copy-id -i ~/.ssh/id_rsa.pub userB@149.12.34.56   <span class="hljs-comment"># 把 public key 送給對方</span></span><br></pre></td></tr></table></figure><p></p><h2 id="目標電腦設定"><a href="#目標電腦設定" class="headerlink" title="目標電腦設定"></a>目標電腦設定</h2><p>Server A 開一個隧道到 ServerB</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[userA@ServerA] $ ssh -NfR 1234:localhost:22 userB@149.12.34.56    <span class="hljs-comment"># f 代表背景執行</span></span><br></pre></td></tr></table></figure><p></p><h2 id="連到目標電腦"><a href="#連到目標電腦" class="headerlink" title="連到目標電腦"></a>連到目標電腦</h2><h3 id="方法-1"><a href="#方法-1" class="headerlink" title="方法 1"></a>方法 1</h3><p>Client 先連到 ServerB</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[user@Client] $ ssh userB@149.12.34.56</span><br></pre></td></tr></table></figure><p></p><p>因為前面 ServerA 已經開一個隧道過來<br>所以 ServerB 就能連到 ServerA 了</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[userB@ServerB] $ ssh userA@localhost -p 1234</span><br></pre></td></tr></table></figure><p></p><h3 id="方法-2"><a href="#方法-2" class="headerlink" title="方法 2"></a>方法 2</h3><p>使用一個指令來達成 “先連到 ServerB 再下指令連到 ServerA”</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[user@Client] $ ssh -t userB@149.12.34.56 <span class="hljs-string">"ssh userA@localhost -p 1234"</span></span><br></pre></td></tr></table></figure><p></p><h3 id="方法-3"><a href="#方法-3" class="headerlink" title="方法 3"></a>方法 3</h3><p>直接以 ServerB 當跳板連到 ServerA</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[user@Client] $ ssh -o <span class="hljs-string">"ProxyJump userB@149.12.34.56"</span> userA@localhost -p 1234</span><br></pre></td></tr></table></figure><p></p><p>或是</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[user@Client] $ ssh -J userB@149.12.34.56 userA@localhost -p 1234</span><br></pre></td></tr></table></figure><p></p><h3 id="方法-4-推薦"><a href="#方法-4-推薦" class="headerlink" title="方法 4 (推薦)"></a>方法 4 (推薦)</h3><p>原本 ServerB 只能透過 localhost 來連到 ServerA<br>此方法是 Server A 設定時加上 “-g” 這個 option<br>(允許遠端主機連到本地的轉發 port)<br>讓 Client 透過 ServerB 的 port 直連到 ServerA</p><ol><li><p>仿照前面 <a href="#目標電腦設定">開隧道</a> 時 ServerA 改下指令：</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[userA@ServerA] $ ssh -gNfR 0.0.0.0:1234:localhost:22 userB@149.12.34.56</span><br></pre></td></tr></table></figure><p></p></li><li><p>ServerB 要設定 GatewayPorts：</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[userB@ServerB] $ vim /etc/sshd_config</span><br></pre></td></tr></table></figure><p></p><p>裡面的 “GatewayPorts” 改成 yes (預設是 no) 並重開 sshd 服務:</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[userB@ServerB] $ systemctl restart sshd</span><br></pre></td></tr></table></figure><p></p></li><li><p>去防火牆把中繼 port 設為允許 (ssh 是 tcp)</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[userB@ServerB] $ iptables -A INPUT -i eth0 -p tcp --dport 1234 -j ACCEPT</span><br></pre></td></tr></table></figure><p></p><p>把 iptables 設定存起來</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[userB@ServerB] $ iptables-save</span><br></pre></td></tr></table></figure><p></p></li><li><p>Client 下指令 (記得這邊 account 要填 ServerB 的登入帳號)</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[user@Client] $ ssh userB@149.12.34.56 -p 1234</span><br></pre></td></tr></table></figure><p></p></li></ol><h2 id="其他相關指令"><a href="#其他相關指令" class="headerlink" title="其他相關指令"></a>其他相關指令</h2><h3 id="查看網路狀態"><a href="#查看網路狀態" class="headerlink" title="查看網路狀態"></a>查看網路狀態</h3><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -a|less       <span class="hljs-comment"># less 代表翻頁檢視</span></span><br></pre></td></tr></table></figure><p></p><h3 id="登出"><a href="#登出" class="headerlink" title="登出"></a>登出</h3><p>登入後如果想登出可執行以下指令：</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="hljs-built_in">exit</span></span><br></pre></td></tr></table></figure><p></p><h3 id="關閉-SSH-Tunnel"><a href="#關閉-SSH-Tunnel" class="headerlink" title="關閉 SSH Tunnel"></a>關閉 SSH Tunnel</h3><p>以下為列出 process 資訊的指令：</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ps -ef|grep 1234      <span class="hljs-comment"># 列出使用 1234 port 的 process</span></span><br><span class="line">$ ps aux|less           <span class="hljs-comment"># 列出正在進行的 process</span></span><br><span class="line">$ ps aux|grep ssh       <span class="hljs-comment"># 列出 ssh 相關的 process</span></span><br></pre></td></tr></table></figure><p></p><p>找到 process id 後就能刪除：</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="hljs-built_in">kill</span> -9 [process id]  <span class="hljs-comment"># 刪除指定 process id 的 process</span></span><br></pre></td></tr></table></figure><p></p><h2 id="斷線時自動重連"><a href="#斷線時自動重連" class="headerlink" title="斷線時自動重連"></a>斷線時自動重連</h2><p>有連線就有可能斷線<br>這時候 serverA 就可以用 autossh 來建立 Reverse SSH Tunneling:</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># -M 後面是監聽用的 port, 不可跟 localhost 前的 port 一樣, 設 0 代表強制關閉</span></span><br><span class="line">[userA@ServerA] $ autossh -M 0 -o ServerAliveInterval=10 -o ExitOnForwardFailure=yes -gNfR 1234:localhost:22 userB@149.12.34.56</span><br></pre></td></tr></table></figure><p></p><p>或是可使用 <a href="https://www.npmjs.com/package/cmd-boost" target="_blank" rel="noopener">cmd-boost</a> 這個工具</p><p>如果要關閉 autossh：</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pkill -3 autossh</span><br></pre></td></tr></table></figure><p></p><h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><ol><li><a href="https://easylife.tw/2043" target="_blank" rel="noopener">Reverse SSH Tunnel實際運用，搭配auotssh永不斷線，putty建立反向tunnel</a></li><li><a href="http://blog.codylab.com/cmd-ssh-copy-id/" target="_blank" rel="noopener">實現免密碼 ssh 登入遠端主機</a></li><li><a href="https://blog.urfix.com/25-ssh-commands-tricks/" target="_blank" rel="noopener">25 Best SSH Commands / Tricks</a></li><li><a href="https://www.xiebruce.top/650.html" target="_blank" rel="noopener">ssh通过代理登录远程主机及穿越跳板机</a></li><li><a href="https://www.howtogeek.com/428413/what-is-reverse-ssh-tunneling-and-how-to-use-it/" target="_blank" rel="noopener">What Is Reverse SSH Tunneling? (and How to Use It)</a></li><li><a href="https://www.zhoumingzhi.com/2013/05/17/reverse-ssh-tunneling/" target="_blank" rel="noopener">SSH反向代理使用心得</a></li><li><a href="https://askubuntu.com/questions/50064/reverse-port-tunnelling" target="_blank" rel="noopener">Reverse port tunnelling</a></li><li><a href="https://www.ssh.com/ssh/command/" target="_blank" rel="noopener">SSH COMMAND</a></li></ol></div></article><article class="article content gallery" itemscope itemprop="blogPost"><h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name"><a href="/2019/10/2019-%E9%9D%A2%E8%A9%A6%E7%B4%80%E9%8C%84/" itemprop="url">2019 面試紀錄</a></h1><div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile"><span class="column is-narrow"><time datetime="2019-10-12T13:56:00.000Z" itemprop="datePublished">Oct 12 2019</time> </span><span class="column is-narrow article-category"><i class="far fa-folder"></i> <a class="article-category-link" href="/categories/Others/">Others</a> </span><span class="column is-narrow">18 minutes read (About 2674 words)</span></div><div class="article-entry is-size-6-mobile" itemprop="articleBody"><h3 id="個人狀態"><a href="#個人狀態" class="headerlink" title="個人狀態"></a>個人狀態</h3><p>學經歷：國立資工學、碩畢，3 年 PHP 全端 + 2 年 NodeJS 後端經驗<br>8 月初臨時起意準備弄好履歷就開始遠征 (長征?)<br>以下公司為有面試或電訪公司，按照時間排序<br>理想薪資統一給年薪，預計到職日都說 10 月<br>N 為某一份工作的月薪</p><h3 id="面試公司"><a href="#面試公司" class="headerlink" title="面試公司"></a>面試公司</h3><h4 id="利頡資訊"><a href="#利頡資訊" class="headerlink" title="利頡資訊"></a>利頡資訊</h4><p>職位：高級後端工程師 (自投)<br>感想：接大型案子的公司 (不接官網之類的)；問很多程式語言間的差異、作業系統、DB 規劃，問的很雜又細，除了 JS 以外被電到快飛起來；如果想湊個面試經驗可試試。<br>結果：Offer Get (N-2k * 14)</p><h4 id="VMFive"><a href="#VMFive" class="headerlink" title="VMFive"></a>VMFive</h4><p>職位：Backend Engineer (對方找的)<br>感想：網路資料已好幾年沒更新的公司，目前轉型廣告投放 + 接案；對方 HR 在 104 上給錯公司地址，剛好那地址周圍數百公尺沒有門牌沒路標，讓我在那 1X 分鐘的路程來回繞了 4 次，問了路人、查了 Google Map、打電話給 HR 都找不到目的地，最後是查了官網才找到真正的地址；原本準備 45 分鐘來應付 1X 分鐘的路程，最後卻反而遲到 15 分鐘才到該公司…；事後發現就算地址給錯，但 Google Map 當初指的路才是對的… (Google 大法好!!!)<br>結果：無聲卡</p><h4 id="廣達研究院"><a href="#廣達研究院" class="headerlink" title="廣達研究院"></a>廣達研究院</h4><p>職位：Full-Stack Developer (對方找的)<br>感想：桃園林口的代工廠，部門有點像硬體廠內的軟體公司，算是一個獨立自主的單位；開場先考類多益後面試，因英文沒過一週後補考 + 二面；二面完隔天給口頭 Offer，只是核薪時對方 HR 要求提出各種文件當年資證明，挺複雜的…<br>結果：Offer Get (N+3k * 15?)</p><h4 id="奔騰網路科技"><a href="#奔騰網路科技" class="headerlink" title="奔騰網路科技"></a>奔騰網路科技</h4><p>職位：Platform Developer (對方找的)<br>感想：公司在台北新光大樓的樓上；面完感覺還不錯，但對方好像因預計到職日還有一個月，所以希望我再看看，半個月後有興趣再來二面，半個月後有打過來聊完說會幫我約時間，然後就沒然後了，大概因對方覺得我想二面的意願沒有很大的感覺?<br>結果：對方說要安排二面卻無聲卡</p><h4 id="仁寶"><a href="#仁寶" class="headerlink" title="仁寶"></a>仁寶</h4><p>職位：NodeJS 後端工程師 (對方找的)<br>感想：內科的代工廠，接待區跟前測區非常不像一個大公司該有的樣子 (交誼廳擺幾台筆電就當成了前測與等待區了…)；開場先考英文然後到別棟去面試，剛好主管沒空中，所以由部門內的 2 位工程師來聊天，其中 1 個面到一半也中離，一週後主管又寄信給我邀請我面試，因對方口吻很像第一次接觸，跟對方提醒後對方重新確認並邀請二面，二面主要與 2 位主管聊天與看一下 Coding Style，又一週後給口頭 Offer；以面試感想來說前測場地不是很好，時間上二面與電訪都約下午 5 點以後 (面試官太忙沒空)，感覺挺妙的…<br>結果：Offer Get (N+5k * 15?)</p><h4 id="Canner-易開科技"><a href="#Canner-易開科技" class="headerlink" title="Canner 易開科技"></a>Canner 易開科技</h4><p>職位：後端工程師 (對方找的)<br>感想：公司在幸福站對面的住家內，新公司位址在別處裝潢中，是個超迷你的新創；一面為電訪問各種技術，二週後二面為上機考；老闆年紀跟我差不多但是是位各種技術底子很深厚的人，感覺假如加入打拼應該可以學習很多?<br>結果：感謝函</p><h4 id="書亞集成"><a href="#書亞集成" class="headerlink" title="書亞集成"></a>書亞集成</h4><p>職位：後端工程師 (自投)<br>感想：公司離內科站超近，主營運現有的古典音樂網站；整場面試純雙方互相自介，沒任何技術問題；面試官是一個講求態度與高效率的人 (不要浪費自身生命與他人時間)，也希望找進來的人才能培養為軟體架構師，所以該公司的錄取標準比較特別，為非面試官的其他同事投票，所以會記錄面試者的言行舉止以供投票參考。<br>結果：感謝函 (大概是我面試時白目的問了被對方制止的問題導致扣分很多)</p><h4 id="awoo-阿物"><a href="#awoo-阿物" class="headerlink" title="awoo 阿物"></a>awoo 阿物</h4><p>職位：PHP 工程師 (對方找的)<br>感想：公司在馬偕醫院附近的頂樓，主負責各網站 SEO 的優化；面試前先筆試，筆試完第一關為 2 位 RD 主管 (or 工程師) 面試，稍微自介與檢討筆試內容；第二關為 PM 面試，不知道是因為時間接近中午或是薪資談不妥，第二關最後面有種面試官要強行結束面試趕我走的感覺…<br>結果：無聲卡</p><h4 id="沛司科技"><a href="#沛司科技" class="headerlink" title="沛司科技"></a>沛司科技</h4><p>職位：Web front-end 軟體工程師 (對方找的)<br>感想：公司在南港新創基地，目前產品有單車的 App；面試第一關為 2 位現職工程師面試，對方感覺實力很強，但其中一位一直有種要否定面試者經歷的感覺，讓人感覺不快…；第二關為跟美女老闆談公司狀況與福利。<br>結果：無聲卡</p><h4 id="群暉"><a href="#群暉" class="headerlink" title="群暉"></a>群暉</h4><p>職位：Web &amp; System Developer (對方找的)<br>感想：公司剛搬到亞東醫院附近沒多久，大樓內沒美食區，目前只能去學校附近找吃的；面試粗估有四關，第一關跟 HR 自介；第二關來了位資深的女工程師直接白板題：演算法三題與 SQL 語法一題，雖然有解出來，但耗時太久 (一小時半) 無法到下一關，半個月後收到感謝函。<br>結果：感謝函</p><h4 id="遊戲橘子"><a href="#遊戲橘子" class="headerlink" title="遊戲橘子"></a>遊戲橘子</h4><p>職位：約聘工程師 (獵頭找的)<br>感想：公司雖在內科但是離捷運站有段路，要負責的內容為 beanfun 的後台製作；面試官有事少 1 人，對方問很多架構層面的問題；從面談中覺得對方算是不想花人事成本，只願意先約聘的公司，而且從面試官口中得知該職位要因應各種節慶 + 上頭決策而瘋狂加班，最高紀錄是過年前臨時更改活動內容讓工程師加了 120 小時的班，內心只有一個想法：怕.jpg。<br>結果：拒絕二面</p><h4 id="悠福科技"><a href="#悠福科技" class="headerlink" title="悠福科技"></a>悠福科技</h4><p>職位：後端工程師 (對方找的)<br>感想：公司在松江南京附近，新創公司，感覺有點舊舊破破的，主負責數位行銷或是程序化廣告的部分；唯一一間面試卻沒提供任何飲用水的公司 (大扣分)，跟面試官互相自介完就結束了，順便一提上班的電腦要自備。<br>結果：拒絕二面</p><h4 id="Verizon-Media-Yahoo"><a href="#Verizon-Media-Yahoo" class="headerlink" title="Verizon Media (Yahoo)"></a>Verizon Media (Yahoo)</h4><p>職位：前端工程師 (自投)<br>感想：第一關為電訪 (多名面試官圍繞電話筒的感覺)；原以為 JD 上有寫 NodeJS，會問一些後端之類的問題，結果對方真的只問了純前端的問題，太久沒用整個被電到飛起來；對方說因為同事有外國人，假如有後續要英文面試。<br>結果：無聲卡</p><h4 id="趨勢科技"><a href="#趨勢科技" class="headerlink" title="趨勢科技"></a>趨勢科技</h4><p>職位：約聘工程師 (獵頭找的)<br>感想：公司在台北教育大學附近，職缺需求要用 Python 做一個釣魚網站學習平台，跟 2 位面試官互相自介，沒任何技術問題；因為公司政策，各部門有人數上限，部門只好花錢找人力，除非有人離職，不然約聘轉正有很大的疑慮。<br>結果：無聲卡</p><h4 id="逸志科技"><a href="#逸志科技" class="headerlink" title="逸志科技"></a>逸志科技</h4><p>職位：研發工程師 (對方找的)<br>感想：市政府附近的住家內，金融科技新創，職缺需求要 Java；老闆有 CFP 證照又有某金控還證券商的總經理經歷，是個非常有自信的女強人，要我直接拿名字 Google 就能認識她了；每天至少加班一小時以上，感覺會很累但是是一個可以學到很多東西的地方?<br>結果：無聲卡</p><h4 id="國泰金融-大數數"><a href="#國泰金融-大數數" class="headerlink" title="國泰金融 (大數數)"></a>國泰金融 (大數數)</h4><p>職位：NodeJS 工程師 (對方找的)<br>感想：總部在市政府附近，是個號稱用各種新技術的部門，目前要整合各種舊系統；工作量不會因各種節慶或決策之類的影響，準時上下班，有點像使用新技術的公務機關? 其中一位面試官一直問研替離職原因的細節，感覺超沒禮貌…；面試過程因規定不能提公司福利的部分，要以後跟 HR 的第 N 次面試才會談，但你們不只缺人，徵一個人跑完流程要快 50 天 (對方提供的數據)，真的沒問題嗎…<br>結果：無聲卡</p><h3 id="總結"><a href="#總結" class="headerlink" title="總結"></a>總結</h3><ol><li><p>英文很重要<br>假如要投大廠很難不碰到英文，因為會有以下幾種情況：<br>(1) 要求英文 CV<br>(2) 英文電訪 or 面試<br>(3) 面試前先考類多益，考過了再開始面試<br>(4) 前測 or 上機考的題目全英文，而且題目長得跟閱讀文章一樣<br>資訊業很多機會都是外商職缺，英文一差就會刪掉很多機會</p></li><li><p>刷 LeetCode<br>有些公司面是直接白板題或上機考<br>刷題除了訓練解析速度外，維持程式手感很重要的</p></li><li><p>從準備開始丟履歷前 1~2 個月就要開始準備<br>畢竟求職前就有一堆前置作業要忙：<br>(1) 重新複習資訊類觀念 (前後端、作業系統、資料結構、系統架構、DB 規劃…等等)<br>(2) 刷 LeetCode<br>(3) 整理作品集<br>(4) 修整履歷<br>每一項都是耗時耗力的工作….</p></li></ol></div></article><article class="article content gallery" itemscope itemprop="blogPost"><h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name"><a href="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E7%B4%80%E9%8C%84/" itemprop="url">建置網站紀錄</a></h1><div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile"><span class="column is-narrow"><time datetime="2019-10-08T13:47:00.000Z" itemprop="datePublished">Oct 8 2019</time> </span><span class="column is-narrow article-category"><i class="far fa-folder"></i> <a class="article-category-link" href="/categories/Web/">Web</a> </span><span class="column is-narrow">7 minutes read (About 1067 words)</span></div><div class="article-entry is-size-6-mobile" itemprop="articleBody"><h2 id="緣由"><a href="#緣由" class="headerlink" title="緣由"></a>緣由</h2><p>原本想要一個較個人風的 email<br>參照 <a href="https://free.com.tw/improvmx/" target="_blank" rel="noopener">網路上</a> 得知 Google Domains 不只提供 domain 同時提供指定 email 轉寄的功能<br>就直接照 <a href="https://free.com.tw/google-domains/" target="_blank" rel="noopener">這篇</a> 來購買一個 domain<br>Google 相較其他網域商，雖然價格貴一點點，但每年價格都很一致<br>不像有些強打第一年優惠但第二年以後價格快翻倍跳反而比 Google 的還貴<br>在這邊最便宜的一年 9 USD，商用字詞的約 1X USD 即可入手 (我是買 12 USD 的)</p><h2 id="設定-Email-轉寄"><a href="#設定-Email-轉寄" class="headerlink" title="設定 Email 轉寄"></a>設定 Email 轉寄</h2><ol><li><p>購買網域後，進入設定頁 -&gt; 電子郵件</p></li><li><p>最下方 “電子郵件轉寄” 填入你想要的別名與轉寄的地址，儲存後就會轉寄了<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E7%B4%80%E9%8C%84/email_forwarding.png" alt></p></li></ol><h2 id="利用-Hexo-與-GitHub-Page-建立免費的靜態-Blog"><a href="#利用-Hexo-與-GitHub-Page-建立免費的靜態-Blog" class="headerlink" title="利用 Hexo 與 GitHub Page 建立免費的靜態 Blog"></a>利用 Hexo 與 GitHub Page 建立免費的靜態 Blog</h2><h3 id="所需環境與工具"><a href="#所需環境與工具" class="headerlink" title="所需環境與工具"></a>所需環境與工具</h3><ol><li><p>一個 <a href="https://github.com/" target="_blank" rel="noopener">GitHub</a> 帳號</p></li><li><p><a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">NodeJS</a></p></li><li><p><a href="https://git-scm.com/downloads" target="_blank" rel="noopener">Git</a></p></li></ol><h3 id="建立一個-Repository"><a href="#建立一個-Repository" class="headerlink" title="建立一個 Repository"></a>建立一個 Repository</h3><ol><li><p>登入 GitHub</p></li><li><p>建立 Repository</p></li><li><p>name 填入 <code>yourname.github.io</code> (yourname 請改成你的 GitHub ID)<br>下方的 type 記得請勾選 “public”<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E7%B4%80%E9%8C%84/create_repository.png" alt></p></li></ol><h3 id="安裝-Hexo"><a href="#安裝-Hexo" class="headerlink" title="安裝 Hexo"></a>安裝 Hexo</h3><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ npm i hexo-cli -g</span><br><span class="line">$ hexo init blog</span><br><span class="line">$ <span class="hljs-built_in">cd</span> blog</span><br><span class="line">$ npm i</span><br></pre></td></tr></table></figure><p></p><h3 id="安裝-Hexo-Git"><a href="#安裝-Hexo-Git" class="headerlink" title="安裝 Hexo Git"></a>安裝 Hexo Git</h3><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i hexo-deployer-git</span><br></pre></td></tr></table></figure><p></p><h3 id="安裝-Blog-主題"><a href="#安裝-Blog-主題" class="headerlink" title="安裝 Blog 主題"></a>安裝 Blog 主題</h3><p>這邊我們以安裝 <a href="https://github.com/ppoffice/hexo-theme-minos" target="_blank" rel="noopener">minos</a> 為例子<br>其中 minos 需要 <a href="https://www.npmjs.com/package/hexo-renderer-sass" target="_blank" rel="noopener">hexo-renderer-sass</a> 這個套件</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="hljs-built_in">clone</span> https://github.com/ppoffice/hexo-theme-minos.git themes/minos</span><br><span class="line">$ npm i hexo-renderer-sass</span><br></pre></td></tr></table></figure><p></p><h3 id="調整設定"><a href="#調整設定" class="headerlink" title="調整設定"></a>調整設定</h3><p>在 blog 資料夾內可以看到 “_config.yml” 這個設定檔案<br>打開後在中下方有個 theme 的部分改成:</p><p></p><figure class="highlight yml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">theme:</span> <span class="hljs-string">minos</span></span><br></pre></td></tr></table></figure><p></p><p>最下方 deploy 的部分則改成：</p><p></p><figure class="highlight yml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">deploy:</span></span><br><span class="line">    <span class="hljs-attr">type:</span> <span class="hljs-string">git</span></span><br><span class="line">    <span class="hljs-attr">repository:</span> <span class="hljs-string">http://github.com/yourname/yourname.github.io.git</span></span><br><span class="line">    <span class="hljs-attr">branch:</span> <span class="hljs-string">master</span></span><br></pre></td></tr></table></figure><p></p><p>這裡的 “yourname” 改成你的 github 帳號<br>其他更詳細的設定可參考 <a href="https://hexo.io/docs/configuration" target="_blank" rel="noopener">這裡</a></p><h3 id="開啟-Server"><a href="#開啟-Server" class="headerlink" title="開啟 Server"></a>開啟 Server</h3><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo s -p [port]</span><br></pre></td></tr></table></figure><p></p><p>預設在 <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a> 看 Local Page (裡面會有一篇 Hello World)<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E7%B4%80%E9%8C%84/blog_home.png" alt></p><h3 id="建置靜態網頁"><a href="#建置靜態網頁" class="headerlink" title="建置靜態網頁"></a>建置靜態網頁</h3><p>把 Markdown File 轉成網頁</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g</span><br></pre></td></tr></table></figure><p></p><h3 id="發佈到-GitHub-Page-上"><a href="#發佈到-GitHub-Page-上" class="headerlink" title="發佈到 GitHub Page 上"></a>發佈到 GitHub Page 上</h3><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo d</span><br></pre></td></tr></table></figure><p></p><p>或是你也可以建置、發佈一起做</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo d -g</span><br></pre></td></tr></table></figure><p></p><h2 id="網站轉址"><a href="#網站轉址" class="headerlink" title="網站轉址"></a>網站轉址</h2><p>既然我們已經有 Google Domain 跟 Hexo + GitHub Page 產的 Blog，該是串起來的時候了</p><h3 id="設定-DNS"><a href="#設定-DNS" class="headerlink" title="設定 DNS"></a>設定 DNS</h3><p>到 Google Domains 設定頁 -&gt; DNS -&gt; 自訂資源紀錄<br>添加一筆 Type A，IP 如下：</p><ul><li>185.199.108.153</li><li>185.199.109.153</li><li>185.199.110.153</li><li>185.199.111.153</li></ul><p>再添加一筆 CNAME：<br>name 填 subdomain (例如 “blog”)<br>data 填 <code>yourname.github.io</code> (yourname 請改成你的 github ID)</p><p>填完顯示如下：<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E7%B4%80%E9%8C%84/custom_resource_records.png" alt></p><h3 id="設定-GitHub-Page-的-Domain"><a href="#設定-GitHub-Page-的-Domain" class="headerlink" title="設定 GitHub Page 的 Domain"></a>設定 GitHub Page 的 Domain</h3><ol><li><p>在 /blog/source 資料夾建立 CNAME 檔案</p><p></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="hljs-built_in">cd</span> /blog/<span class="hljs-built_in">source</span></span><br><span class="line">$ touch CNAME</span><br></pre></td></tr></table></figure><p></p></li><li><p>檔案內填寫入</p><p></p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">subdomain.domain.com</span><br></pre></td></tr></table></figure><p></p><p>假設我的 subdomain 是 “blog”<br>我買的 domain 是 <code>brchen777.com</code><br>那在這邊要填入的會是 <code>blog.brchen777.com</code></p></li><li><p>假設有填好，進入 GitHub Repository -&gt; Settings -&gt; GitHub Pages 區塊，會有 “Your site is published at XXX” 的訊息，其中 XXX 就是 blog 的網址，顯示如下：<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E7%B4%80%E9%8C%84/github_pages.png" alt></p></li><li><p>GitHub Page 有內建 HTTPS，網站設定好一段時間之後就有 “Enforce HTTPS” 可選 (如上圖的下方)</p></li></ol><h3 id="設定多個-Subdomain-指向同一個-GitHub-Page"><a href="#設定多個-Subdomain-指向同一個-GitHub-Page" class="headerlink" title="設定多個 Subdomain 指向同一個 GitHub Page"></a>設定多個 Subdomain 指向同一個 GitHub Page</h3><p>因為 GitHub Page 不支援多個 CNAME 設定，所以其他的 subdomain 要自行設定轉址<br>到 Google Domains 設定頁 -&gt; DNS -&gt; 綜合記錄<br>假設要把 “www” 這個 subdomain 轉址，新增一筆子網域轉址如下：<br><img src="/2019/10/%E5%BB%BA%E7%BD%AE%E7%B6%B2%E7%AB%99%E7%B4%80%E9%8C%84/synthetic_records.png" alt><br>以這篇案例來說，<code>www.brchen777.com</code> 與 <code>brchen777.github.io</code> 都會指到 <code>blog.brchen777.com</code></p><h3 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h3><ol><li><a href="https://free.com.tw/google-domains/" target="_blank" rel="noopener">在 Google Domains 註冊購買網域名稱教學</a></li><li><a href="https://yaoandy107.github.io/hexo-tutorial/" target="_blank" rel="noopener">Hexo+GitHub，新手也可以快速建立部落格</a></li><li><a href="https://medium.com/@bebebobohaha/%E4%BD%BF%E7%94%A8-hexo-gitpage-%E6%90%AD%E5%BB%BA%E5%80%8B%E4%BA%BA-blog-5c6ed52f23db" target="_blank" rel="noopener">如何搭建個人 Blog 使用 Hexo + Gitpage</a></li><li><a href="https://ithelp.ithome.com.tw/articles/10207997" target="_blank" rel="noopener">Hexo - 前端也能建置部落格！更換主題與發表文章篇</a></li><li><a href="https://help.github.com/en/articles/configuring-a-custom-domain-for-your-github-pages-site" target="_blank" rel="noopener">Configuring a custom domain for your GitHub Pages site</a></li><li><a href="https://blog.haterain.app/custom-domain-by-google-domain/" target="_blank" rel="noopener">自訂網域名稱：Google Domain</a></li><li><a href="https://help.github.com/en/articles/troubleshooting-custom-domains-and-github-pages" target="_blank" rel="noopener">Troubleshooting custom domains and GitHub Pages</a></li></ol></div></article></div></section><footer class="footer"><div class="container"><div class="columns content"><div class="column is-narrow has-text-centered">&copy; 2020 brchen777&nbsp; Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a href="http://github.com/ppoffice/hexo-theme-minos" target="_blank" rel="noopener">Minos</a></div><div class="column is-hidden-mobile"></div></div></div></footer><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/" target="_blank" rel="noopener">Update my browser now</a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p></div><script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script><script>$(document).ready(function(){outdatedBrowser({bgColor:"#f25648",color:"#ffffff",lowerThan:"flex"})})</script><script>window.FontAwesomeConfig={searchPseudoElements:!0},moment.locale("en-AU")</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>MathJax.Hub.Config({"HTML-CSS":{matchFontHeight:!1},SVG:{matchFontHeight:!1},CommonHTML:{matchFontHeight:!1},tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}})</script><script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script><script>!function(e){e(document).ready(function(){"function"==typeof e.fn.lightGallery&&e(".article.gallery").lightGallery({selector:".gallery-item"}),"function"==typeof e.fn.justifiedGallery&&e(".justified-gallery").justifiedGallery()})}(jQuery)</script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><style>.hljs{position:relative}.hljs .clipboard-btn{float:right;color:#9a9a9a;background:0 0;border:none;cursor:pointer}.hljs .clipboard-btn:hover{color:#8a8a8a}.hljs>.clipboard-btn{display:none;position:absolute;right:4px;top:4px}.hljs:hover>.clipboard-btn{display:inline}.hljs>figcaption>.clipboard-btn{margin-right:4px}</style><script>$(document).ready(function(){$("figure.hljs").each(function(t,e){var a="code-"+t,r=e.querySelector(".code"),c=$('<button>Copy <i class="far fa-clipboard"></i></button>');r.id=a,c.addClass("clipboard-btn"),c.attr("data-clipboard-target-id",a);var n=e.querySelector("figcaption");n?n.append(c[0]):e.prepend(c[0])}),new ClipboardJS(".clipboard-btn",{target:function(t){return document.getElementById(t.getAttribute("data-clipboard-target-id"))}}).on("success",function(t){t.clearSelection()})})</script><script src="/js/script.js"></script><div class="searchbox ins-search"><div class="searchbox-mask"></div><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input type="text" class="searchbox-input ins-search-input" placeholder="Type something..."> <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-database.js"></script><script>$(document).ready(()=>{$(".article-meta").append('<span id="visits" class="column is-narrow">Visits: <font class="count">--<font></span>','<span id="pageviews" class="column is-narrow">Pageviews: <font class="count">--<font></span>');firebase.initializeApp({apiKey:"AIzaSyBWGDv6N1SHujN7h3DWEeNBJwsHwM2xwN4",authDomain:"blog-brchen777.firebaseapp.com",databaseURL:"https://blog-brchen777.firebaseio.com"});const a=firebase.database(),e=window.location.host,n=e+window.location.pathname;function s(e,n){const s=decodeURI(e.replace(new RegExp("\\/|\\.","g"),"_"));a.ref(s).once("value").then(function(e){var t=parseInt(e.val()||0)+1;a.ref(s).set(t),n.length>0&&n.html(t)})}s(e,$("#visits .count")),n&&"_"!=n&&s("page/"+n,$("#pageviews .count"))});</script></body></html>